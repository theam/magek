<!DOCTYPE html><html class="default" lang="en" data-base="../"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>Environment Configuration | Magek Framework</title><meta name="description" content="Documentation for Magek Framework"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><link rel="stylesheet" href="../assets/custom.css"/><script defer src="../assets/main.js"></script><script defer src="../assets/custom.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script><script async src="../assets/hierarchy.js" id="tsd-hierarchy-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => window.app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><a href="../index.html" class="title">Magek Framework</a><div id="tsd-toolbar-links"><a href="https://github.com/theam/magek">GitHub</a></div><button id="tsd-search-trigger" class="tsd-widget" aria-label="Search"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-search"></use></svg></button><dialog id="tsd-search" aria-label="Search"><input role="combobox" id="tsd-search-input" aria-controls="tsd-search-results" aria-autocomplete="list" aria-expanded="true" autocapitalize="off" autocomplete="off" placeholder="Search the docs" maxLength="100"/><ul role="listbox" id="tsd-search-results"></ul><div id="tsd-search-status" aria-live="polite" aria-atomic="true"><div>Preparing search index...</div></div></dialog><a href="#" class="tsd-widget menu" id="tsd-toolbar-menu-trigger" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb" aria-label="Breadcrumb"><li><a href="Documentation.html">Documentation</a></li><li><a href="" aria-current="page">Environment Configuration</a></li></ul></div><div class="tsd-panel tsd-typography"><h1 id="environments" class="tsd-anchor-link">Environments<a href="#environments" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h1><p>You can create multiple environments calling the <code>Magek.configure</code> function several times using different environment names as the first argument. You can create one file for each environment, but it is not required. In this example we set all environments in a single file:</p>
<pre><code class="typescript"><span class="hl-5">// Here we use a single file called src/config.ts, but you can use separate files for each environment too.</span><br/><br/><span class="hl-4">Magek</span><span class="hl-1">.</span><span class="hl-0">configure</span><span class="hl-1">(</span><span class="hl-2">&#39;stage&#39;</span><span class="hl-1">, (</span><span class="hl-4">config</span><span class="hl-1">: </span><span class="hl-7">MagekConfig</span><span class="hl-1">): </span><span class="hl-7">void</span><span class="hl-1"> </span><span class="hl-3">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">config</span><span class="hl-1">.</span><span class="hl-4">appName</span><span class="hl-1"> = </span><span class="hl-2">&#39;fruit-store-stage&#39;</span><br/><span class="hl-1">  </span><span class="hl-4">config</span><span class="hl-1">.</span><span class="hl-4">runtime</span><span class="hl-1"> = </span><span class="hl-4">ServerRuntime</span><br/><span class="hl-1">  </span><span class="hl-4">config</span><span class="hl-1">.</span><span class="hl-4">eventStoreAdapter</span><span class="hl-1"> = </span><span class="hl-4">eventStore</span><br/><span class="hl-1">  </span><span class="hl-4">config</span><span class="hl-1">.</span><span class="hl-4">readModelStoreAdapter</span><span class="hl-1"> = </span><span class="hl-4">readModelStore</span><br/><span class="hl-1">  </span><span class="hl-4">config</span><span class="hl-1">.</span><span class="hl-4">sessionStoreAdapter</span><span class="hl-1"> = </span><span class="hl-4">sessionStore</span><br/><span class="hl-1">})</span><br/><br/><span class="hl-4">Magek</span><span class="hl-1">.</span><span class="hl-0">configure</span><span class="hl-1">(</span><span class="hl-2">&#39;prod&#39;</span><span class="hl-1">, (</span><span class="hl-4">config</span><span class="hl-1">: </span><span class="hl-7">MagekConfig</span><span class="hl-1">): </span><span class="hl-7">void</span><span class="hl-1"> </span><span class="hl-3">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">config</span><span class="hl-1">.</span><span class="hl-4">appName</span><span class="hl-1"> = </span><span class="hl-2">&#39;fruit-store-prod&#39;</span><br/><span class="hl-1">  </span><span class="hl-4">config</span><span class="hl-1">.</span><span class="hl-4">runtime</span><span class="hl-1"> = </span><span class="hl-4">ServerRuntime</span><br/><span class="hl-1">  </span><span class="hl-4">config</span><span class="hl-1">.</span><span class="hl-4">eventStoreAdapter</span><span class="hl-1"> = </span><span class="hl-4">eventStore</span><br/><span class="hl-1">  </span><span class="hl-4">config</span><span class="hl-1">.</span><span class="hl-4">readModelStoreAdapter</span><span class="hl-1"> = </span><span class="hl-4">readModelStore</span><br/><span class="hl-1">  </span><span class="hl-4">config</span><span class="hl-1">.</span><span class="hl-4">sessionStoreAdapter</span><span class="hl-1"> = </span><span class="hl-4">sessionStore</span><br/><span class="hl-1">})</span>
</code><button type="button">Copy</button></pre>

<h2 id="pluggable-adapters" class="tsd-anchor-link">Pluggable Adapters<a href="#pluggable-adapters" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Magek uses a pluggable architecture for data storage, allowing you to choose the most appropriate storage solution for your needs. The framework provides several adapter types:</p>
<h3 id="event-store-adapters" class="tsd-anchor-link">Event Store Adapters<a href="#event-store-adapters" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Event store adapters handle the storage and retrieval of events in your event-sourced system:</p>
<ul>
<li><code>@magek/adapter-event-store-nedb</code> - A lightweight, file-based adapter perfect for development and testing</li>
</ul>
<h3 id="read-model-store-adapters" class="tsd-anchor-link">Read Model Store Adapters<a href="#read-model-store-adapters" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Read model store adapters manage the storage of read models (projections of your domain state):</p>
<ul>
<li><code>@magek/adapter-read-model-store-nedb</code> - A lightweight, file-based adapter perfect for development and testing</li>
</ul>
<h3 id="session-store-adapters" class="tsd-anchor-link">Session Store Adapters<a href="#session-store-adapters" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Session store adapters handle WebSocket connections and subscription management:</p>
<ul>
<li><code>@magek/adapter-session-store-nedb</code> - A lightweight, file-based adapter perfect for development and testing</li>
</ul>
<p>This modular approach allows you to:</p>
<ul>
<li>Start development quickly with simple file-based stores</li>
<li>Switch to production-grade databases without changing your application code</li>
<li>Create custom adapters for specific requirements</li>
<li>Test your application with different storage backends</li>
</ul>
<p>To use adapters, simply import them and assign them to the corresponding configuration properties (<code>config.eventStoreAdapter</code>, <code>config.readModelStoreAdapter</code>, <code>config.sessionStoreAdapter</code>) in your environment configuration.</p>
<h2 id="environment-files" class="tsd-anchor-link">Environment Files<a href="#environment-files" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>It is also possible to place an environment configuration in a separated file. Let's say that a developer called &quot;John&quot; created its own configuration file <code>src/config/john.ts</code>. The content would be the following:</p>
<pre><code class="typescript"><br/><span class="hl-4">Magek</span><span class="hl-1">.</span><span class="hl-0">configure</span><span class="hl-1">(</span><span class="hl-2">&#39;john&#39;</span><span class="hl-1">, (</span><span class="hl-4">config</span><span class="hl-1">: </span><span class="hl-7">MagekConfig</span><span class="hl-1">): </span><span class="hl-7">void</span><span class="hl-1"> </span><span class="hl-3">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">config</span><span class="hl-1">.</span><span class="hl-4">appName</span><span class="hl-1"> = </span><span class="hl-2">&#39;john-fruit-store&#39;</span><br/><span class="hl-1">  </span><span class="hl-4">config</span><span class="hl-1">.</span><span class="hl-4">runtime</span><span class="hl-1"> = </span><span class="hl-4">ServerRuntime</span><br/><span class="hl-1">  </span><span class="hl-4">config</span><span class="hl-1">.</span><span class="hl-4">eventStoreAdapter</span><span class="hl-1"> = </span><span class="hl-4">eventStore</span><br/><span class="hl-1">  </span><span class="hl-4">config</span><span class="hl-1">.</span><span class="hl-4">readModelStoreAdapter</span><span class="hl-1"> = </span><span class="hl-4">readModelStore</span><br/><span class="hl-1">  </span><span class="hl-4">config</span><span class="hl-1">.</span><span class="hl-4">sessionStoreAdapter</span><span class="hl-1"> = </span><span class="hl-4">sessionStore</span><br/><span class="hl-1">})</span>
</code><button type="button">Copy</button></pre>

<p>This way, you can have different configurations depending on your needs.</p>
<p>Magek environments are extremely flexible. As shown in the first example, your 'fruit-store' app can have three team-wide environments: 'dev', 'stage', and 'prod', each of them with different app names or configurations. Developers, like &quot;John&quot; in the second example, can create their own private environments in separate config files to test their changes before committing them.</p>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg><h3>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg><h3>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#environments"><span>Environments</span></a><ul><li><a href="#pluggable-adapters"><span>Pluggable <wbr/>Adapters</span></a></li><li><ul><li><a href="#event-store-adapters"><span>Event <wbr/>Store <wbr/>Adapters</span></a></li><li><a href="#read-model-store-adapters"><span>Read <wbr/>Model <wbr/>Store <wbr/>Adapters</span></a></li><li><a href="#session-store-adapters"><span>Session <wbr/>Store <wbr/>Adapters</span></a></li></ul></li><li><a href="#environment-files"><span>Environment <wbr/>Files</span></a></li></ul></div></details></div><div class="site-menu"><nav id="tsd-sidebar-links" class="tsd-navigation"><a href="https://github.com/theam/magek" class="tsd-nav-link">GitHub</a></nav><nav class="tsd-navigation"><a href="../index.html">Magek Framework</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
