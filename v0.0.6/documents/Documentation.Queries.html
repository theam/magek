<!DOCTYPE html><html class="default" lang="en" data-base="../"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>Queries | Magek Framework</title><meta name="description" content="Documentation for Magek Framework"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><link rel="stylesheet" href="../assets/custom.css"/><script defer src="../assets/main.js"></script><script defer src="../assets/custom.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script><script async src="../assets/hierarchy.js" id="tsd-hierarchy-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => window.app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><a href="../index.html" class="title">Magek Framework</a><div id="tsd-toolbar-links"><a href="https://github.com/theam/magek">GitHub</a></div><button id="tsd-search-trigger" class="tsd-widget" aria-label="Search"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-search"></use></svg></button><dialog id="tsd-search" aria-label="Search"><input role="combobox" id="tsd-search-input" aria-controls="tsd-search-results" aria-autocomplete="list" aria-expanded="true" autocapitalize="off" autocomplete="off" placeholder="Search the docs" maxLength="100"/><ul role="listbox" id="tsd-search-results"></ul><div id="tsd-search-status" aria-live="polite" aria-atomic="true"><div>Preparing search index...</div></div></dialog><a href="#" class="tsd-widget menu" id="tsd-toolbar-menu-trigger" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb" aria-label="Breadcrumb"><li><a href="Documentation.html">Documentation</a></li><li><a href="" aria-current="page">Queries</a></li></ul></div><div class="tsd-panel tsd-typography"><h1 id="queries" class="tsd-anchor-link">Queries<a href="#queries" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h1><p>ReadModels offer read operations over reduced events. On the other hand, Queries provide a way to do custom read operations.</p>
<p>Queries are classes decorated with the <code>@Query</code> decorator that have a <code>handle</code> method.</p>
<pre><code class="typescript"><span class="hl-6">import</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">beforeHookQueryID</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">beforeHookQueryMultiply</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">queryHandlerErrorCartId</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">queryHandlerErrorCartMessage</span><span class="hl-1">,</span><br/><span class="hl-1">} </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&#39;../constants&#39;</span><br/><br/><span class="hl-1">@</span><span class="hl-0">Query</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">authorize:</span><span class="hl-1"> </span><span class="hl-2">&#39;all&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">})</span><br/><span class="hl-6">export</span><span class="hl-1"> </span><span class="hl-3">class</span><span class="hl-1"> </span><span class="hl-7">CartTotalQuantity</span><span class="hl-1"> {</span><br/><span class="hl-1">  @</span><span class="hl-0">Field</span><span class="hl-1">()</span><br/><span class="hl-1">  </span><span class="hl-3">readonly</span><span class="hl-1"> </span><span class="hl-4">cartId</span><span class="hl-1">!: </span><span class="hl-7">UUID</span><br/><br/><span class="hl-1">  @</span><span class="hl-0">Field</span><span class="hl-1">()</span><br/><span class="hl-1">  @</span><span class="hl-4">NonExposed</span><br/><span class="hl-1">  </span><span class="hl-3">readonly</span><span class="hl-1"> </span><span class="hl-4">multiply</span><span class="hl-1">!: </span><span class="hl-7">number</span><br/><br/><span class="hl-1">  </span><span class="hl-3">public</span><span class="hl-1"> </span><span class="hl-3">static</span><span class="hl-1"> </span><span class="hl-3">async</span><span class="hl-1"> </span><span class="hl-0">handle</span><span class="hl-1">(</span><span class="hl-4">query</span><span class="hl-1">: </span><span class="hl-7">CartTotalQuantity</span><span class="hl-1">, </span><span class="hl-4">queryInfo</span><span class="hl-1">: </span><span class="hl-7">QueryInfo</span><span class="hl-1">): </span><span class="hl-7">Promise</span><span class="hl-1">&lt;</span><span class="hl-7">number</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">    </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-8">cart</span><span class="hl-1"> = </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-4">Magek</span><span class="hl-1">.</span><span class="hl-0">entity</span><span class="hl-1">(</span><span class="hl-4">Cart</span><span class="hl-1">, </span><span class="hl-4">query</span><span class="hl-1">.</span><span class="hl-4">cartId</span><span class="hl-1">)</span><br/><span class="hl-1">    </span><span class="hl-6">if</span><span class="hl-1"> (!</span><span class="hl-4">cart</span><span class="hl-1"> || !</span><span class="hl-4">cart</span><span class="hl-1">.</span><span class="hl-4">cartItems</span><span class="hl-1"> || </span><span class="hl-4">cart</span><span class="hl-1">.</span><span class="hl-4">cartItems</span><span class="hl-1">.</span><span class="hl-4">length</span><span class="hl-1"> === </span><span class="hl-9">0</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-6">return</span><span class="hl-1"> </span><span class="hl-9">0</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    </span><span class="hl-6">return</span><span class="hl-1"> </span><span class="hl-4">cart</span><span class="hl-1">?.</span><span class="hl-4">cartItems</span><br/><span class="hl-1">      .</span><span class="hl-0">map</span><span class="hl-1">((</span><span class="hl-4">cartItem</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-4">cartItem</span><span class="hl-1">.</span><span class="hl-4">quantity</span><span class="hl-1">)</span><br/><span class="hl-1">      .</span><span class="hl-0">reduce</span><span class="hl-1">((</span><span class="hl-4">accumulator</span><span class="hl-1">, </span><span class="hl-4">value</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-6">return</span><span class="hl-1"> </span><span class="hl-4">accumulator</span><span class="hl-1"> + </span><span class="hl-4">value</span><br/><span class="hl-1">      }, </span><span class="hl-9">0</span><span class="hl-1">)</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<h2 id="queries-naming-convention" class="tsd-anchor-link">Queries naming convention<a href="#queries-naming-convention" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>We recommend use the <code>Query</code> suffix in your queries name.</p>
<p>Despite you can place your queries in any directory, we strongly recommend you to put them in <code>&lt;project-root&gt;/src/queries</code>.</p>
<pre><code class="text">&lt;project-root&gt;
├── src
│   ├── commands
│   ├── common
│   ├── config
│   ├── entities
│   ├── read-models
│   ├── events
│   ├── queries      &lt;------ put them here
│   └── index.ts
</code><button type="button">Copy</button></pre>

<h2 id="creating-a-query" class="tsd-anchor-link">Creating a query<a href="#creating-a-query" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The preferred way to create a query is by using the generator, e.g.</p>
<pre><code class="shell"><span class="hl-0">npx</span><span class="hl-1"> </span><span class="hl-2">magek</span><span class="hl-1"> </span><span class="hl-2">new:query</span><span class="hl-1"> </span><span class="hl-2">ItemsInCountry</span><span class="hl-1"> </span><span class="hl-3">--fields</span><span class="hl-1"> </span><span class="hl-2">country:string</span>
</code><button type="button">Copy</button></pre>

<p>The generator will create a Typescript class under the queries directory <code>&lt;project-root&gt;/src/queries/items-in-country.ts</code>.</p>
<p>Queries classes can also be created by hand and there are no restrictions. The structure of the data is totally open and can be as complex as you can manage in your projection functions.</p>
<h2 id="the-query-handler-function" class="tsd-anchor-link">The query handler function<a href="#the-query-handler-function" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Each query class must have a method called <code>handle</code>. This function is the command handler, and it will be called by the framework every time one instance of this query is submitted. Inside the handler you can run validations, return errors and query entities to make decisions.</p>
<p>Handler function receive a QueryInfo object to let users interact with the execution context. It can be used for a variety of purposes, including:</p>
<ul>
<li>Access the current signed in user, their roles and other claims included in their JWT token</li>
<li>Access the request context or alter the HTTP response headers</li>
</ul>
<h3 id="validating-data" class="tsd-anchor-link">Validating data<a href="#validating-data" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Magek uses the typed nature of GraphQL to ensure that types are correct before reaching the handler, so you don't have to validate types.</p>
<h4 id="throw-an-error" class="tsd-anchor-link">Throw an error<a href="#throw-an-error" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>There are still business rules to be checked before proceeding with a query. For example, a given number must be between a threshold or a string must match a regular expression. In that case, it is enough just to throw an error in the handler. Magek will use the error's message as the response to make it descriptive.</p>
<h3 id="registering-events" class="tsd-anchor-link">Registering events<a href="#registering-events" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Within the query handler execution, it is not possible to register domain events. If you need to register events, then use a Command. For more details about events and the register parameter, see the <a href="/architecture/event"><code>Events</code></a> section.</p>
<h2 id="authorizing-queries" class="tsd-anchor-link">Authorizing queries<a href="#authorizing-queries" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>You can define who is authorized to access your queries. The Magek authorization feature is covered in <a href="/security/authentication">the auth section</a>. So far, we have seen that you can make a query publicly accessible by authorizing <code>'all'</code> to query it, or you can set specific roles providing an array of roles in this way: <code>authorize: [Admin]</code>.</p>
<h2 id="querying" class="tsd-anchor-link">Querying<a href="#querying" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>For every query, Magek automatically creates the corresponding GraphQL query. For example, given this <code>CartTotalQuantityQuery</code>:</p>
<pre><code class="typescript"><span class="hl-1">@</span><span class="hl-0">Query</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">authorize:</span><span class="hl-1"> </span><span class="hl-2">&#39;all&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">})</span><br/><span class="hl-6">export</span><span class="hl-1"> </span><span class="hl-3">class</span><span class="hl-1"> </span><span class="hl-7">CartTotalQuantityQuery</span><span class="hl-1"> {</span><br/><span class="hl-1">  @</span><span class="hl-0">Field</span><span class="hl-1">()</span><br/><span class="hl-1">  </span><span class="hl-3">readonly</span><span class="hl-1"> </span><span class="hl-4">cartId</span><span class="hl-1">!: </span><span class="hl-7">UUID</span><br/><br/><span class="hl-1">  </span><span class="hl-3">public</span><span class="hl-1"> </span><span class="hl-3">static</span><span class="hl-1"> </span><span class="hl-3">async</span><span class="hl-1"> </span><span class="hl-0">handle</span><span class="hl-1">(</span><span class="hl-4">query</span><span class="hl-1">: </span><span class="hl-7">CartTotalQuantity</span><span class="hl-1">, </span><span class="hl-4">queryInfo</span><span class="hl-1">: </span><span class="hl-7">QueryInfo</span><span class="hl-1">): </span><span class="hl-7">Promise</span><span class="hl-1">&lt;</span><span class="hl-7">number</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">    </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-8">cart</span><span class="hl-1"> = </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-4">Magek</span><span class="hl-1">.</span><span class="hl-0">entity</span><span class="hl-1">(</span><span class="hl-4">Cart</span><span class="hl-1">, </span><span class="hl-4">query</span><span class="hl-1">.</span><span class="hl-4">cartId</span><span class="hl-1">)</span><br/><span class="hl-1">    </span><span class="hl-6">if</span><span class="hl-1"> (!</span><span class="hl-4">cart</span><span class="hl-1"> || !</span><span class="hl-4">cart</span><span class="hl-1">.</span><span class="hl-4">cartItems</span><span class="hl-1"> || </span><span class="hl-4">cart</span><span class="hl-1">.</span><span class="hl-4">cartItems</span><span class="hl-1">.</span><span class="hl-4">length</span><span class="hl-1"> === </span><span class="hl-9">0</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-6">return</span><span class="hl-1"> </span><span class="hl-9">0</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    </span><span class="hl-6">return</span><span class="hl-1"> </span><span class="hl-4">cart</span><span class="hl-1">?.</span><span class="hl-4">cartItems</span><br/><span class="hl-1">      .</span><span class="hl-0">map</span><span class="hl-1">((</span><span class="hl-4">cartItem</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-4">cartItem</span><span class="hl-1">.</span><span class="hl-4">quantity</span><span class="hl-1">)</span><br/><span class="hl-1">      .</span><span class="hl-0">reduce</span><span class="hl-1">((</span><span class="hl-4">accumulator</span><span class="hl-1">, </span><span class="hl-4">value</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-6">return</span><span class="hl-1"> </span><span class="hl-4">accumulator</span><span class="hl-1"> + </span><span class="hl-4">value</span><br/><span class="hl-1">      }, </span><span class="hl-9">0</span><span class="hl-1">)</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p>You will get the following GraphQL query and subscriptions:</p>
<pre><code class="graphQL"><span class="hl-3">query</span><span class="hl-1"> </span><span class="hl-0">CartTotalQuantityQuery</span><span class="hl-1">(</span><span class="hl-4">$cartId</span><span class="hl-1">: </span><span class="hl-7">ID</span><span class="hl-1">!): </span><span class="hl-0">Float</span><span class="hl-1">!</span>
</code><button type="button">Copy</button></pre>

<blockquote>
<p><strong>Note:</strong> Query subscriptions are not supported yet</p>
</blockquote>
<h3 id="returning-union-types" class="tsd-anchor-link">Returning union types<a href="#returning-union-types" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Magek supports returning graphql union types. For example, this <code>SearchMedia</code> query returning books and movies.</p>
<pre><code class="typescript"><span class="hl-6">export</span><span class="hl-1"> </span><span class="hl-3">type</span><span class="hl-1"> </span><span class="hl-7">MediaValue</span><span class="hl-1"> = </span><span class="hl-7">BookReadModel</span><span class="hl-1"> | </span><span class="hl-7">MovieReadModel</span><br/><br/><span class="hl-3">class</span><span class="hl-1"> </span><span class="hl-7">SearchResult</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-3">readonly</span><span class="hl-1"> </span><span class="hl-4">results</span><span class="hl-1">!: </span><span class="hl-7">MediaValue</span><span class="hl-1">[]</span><br/><span class="hl-1">  </span><span class="hl-3">constructor</span><span class="hl-1">(</span><span class="hl-4">results</span><span class="hl-1">: </span><span class="hl-7">MediaValue</span><span class="hl-1">[]) {</span><br/><span class="hl-1">    </span><span class="hl-3">this</span><span class="hl-1">.</span><span class="hl-4">results</span><span class="hl-1"> = </span><span class="hl-4">results</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-1">@</span><span class="hl-0">Query</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">authorize:</span><span class="hl-1"> </span><span class="hl-2">&#39;all&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">})</span><br/><span class="hl-6">export</span><span class="hl-1"> </span><span class="hl-3">class</span><span class="hl-1"> </span><span class="hl-7">SearchMedia</span><span class="hl-1"> {</span><br/><span class="hl-1">  @</span><span class="hl-0">Field</span><span class="hl-1">()</span><br/><span class="hl-1">  </span><span class="hl-3">readonly</span><span class="hl-1"> </span><span class="hl-4">searchword</span><span class="hl-1">!: </span><span class="hl-7">string</span><br/><br/><span class="hl-1">  </span><span class="hl-3">public</span><span class="hl-1"> </span><span class="hl-3">static</span><span class="hl-1"> </span><span class="hl-3">async</span><span class="hl-1"> </span><span class="hl-0">handle</span><span class="hl-1">(</span><span class="hl-4">query</span><span class="hl-1">: </span><span class="hl-7">SearchMedia</span><span class="hl-1">, </span><span class="hl-4">queryInfo</span><span class="hl-1">: </span><span class="hl-7">QueryInfo</span><span class="hl-1">): </span><span class="hl-7">Promise</span><span class="hl-1">&lt;</span><span class="hl-7">SearchResult</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">    </span><span class="hl-3">const</span><span class="hl-1"> [</span><span class="hl-8">books</span><span class="hl-1">, </span><span class="hl-8">movies</span><span class="hl-1">] = </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-7">Promise</span><span class="hl-1">.</span><span class="hl-0">all</span><span class="hl-1">([</span><br/><span class="hl-1">      </span><span class="hl-4">Magek</span><span class="hl-1">.</span><span class="hl-0">readModel</span><span class="hl-1">(</span><span class="hl-4">BookReadModel</span><span class="hl-1">)</span><br/><span class="hl-1">        .</span><span class="hl-0">filter</span><span class="hl-1">({</span><br/><span class="hl-1">          </span><span class="hl-4">title:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-4">contains:</span><span class="hl-1"> </span><span class="hl-4">query</span><span class="hl-1">.</span><span class="hl-4">searchword</span><span class="hl-1">,</span><br/><span class="hl-1">          },</span><br/><span class="hl-1">        })</span><br/><span class="hl-1">        .</span><span class="hl-0">search</span><span class="hl-1">(),</span><br/><span class="hl-1">      </span><span class="hl-4">Magek</span><span class="hl-1">.</span><span class="hl-0">readModel</span><span class="hl-1">(</span><span class="hl-4">MovieReadModel</span><span class="hl-1">)</span><br/><span class="hl-1">        .</span><span class="hl-0">filter</span><span class="hl-1">({</span><br/><span class="hl-1">          </span><span class="hl-4">title:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-4">contains:</span><span class="hl-1"> </span><span class="hl-4">query</span><span class="hl-1">.</span><span class="hl-4">searchword</span><span class="hl-1">,</span><br/><span class="hl-1">          },</span><br/><span class="hl-1">        })</span><br/><span class="hl-1">        .</span><span class="hl-0">search</span><span class="hl-1">(),</span><br/><span class="hl-1">    ])</span><br/><span class="hl-1">    </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-8">response</span><span class="hl-1"> = [...</span><span class="hl-4">books</span><span class="hl-1">, ...</span><span class="hl-4">movies</span><span class="hl-1">]</span><br/><br/><span class="hl-1">    </span><span class="hl-6">return</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-4">results:</span><span class="hl-1"> </span><span class="hl-4">response</span><span class="hl-1">,</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p>This generates the following query</p>
<pre><code class="graphql"><span class="hl-0">SearchMedia</span><span class="hl-1"> ( input SearchMediaInput! ) </span><span class="hl-0">SearchResult</span><span class="hl-1">!</span>
</code><button type="button">Copy</button></pre>

<p>The GraphQL union querying functionality can then be used. An example for the query above could be the following.</p>
<pre><code class="graphql"><span class="hl-1">{</span><br/><span class="hl-1">  </span><span class="hl-4">SearchMedia</span><span class="hl-1">(</span><span class="hl-4">input</span><span class="hl-1">: { </span><span class="hl-2">searchword</span><span class="hl-1">: </span><span class="hl-2">&quot;Oppenheimer&quot;</span><span class="hl-1"> }) {</span><br/><span class="hl-1">    </span><span class="hl-4">results</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-4">__typename</span><br/><span class="hl-1">      ... </span><span class="hl-3">on</span><span class="hl-1"> </span><span class="hl-7">BookReadModel</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-4">title</span><br/><span class="hl-1">        </span><span class="hl-4">pages</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">      ... </span><span class="hl-3">on</span><span class="hl-1"> </span><span class="hl-7">MovieReadModel</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-4">title</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg><h3>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg><h3>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#queries"><span>Queries</span></a><ul><li><a href="#queries-naming-convention"><span>Queries naming convention</span></a></li><li><a href="#creating-a-query"><span>Creating a query</span></a></li><li><a href="#the-query-handler-function"><span>The query handler function</span></a></li><li><ul><li><a href="#validating-data"><span>Validating data</span></a></li><li><ul><li><a href="#throw-an-error"><span>Throw an error</span></a></li></ul></li><li><a href="#registering-events"><span>Registering events</span></a></li></ul></li><li><a href="#authorizing-queries"><span>Authorizing queries</span></a></li><li><a href="#querying"><span>Querying</span></a></li><li><ul><li><a href="#returning-union-types"><span>Returning union types</span></a></li></ul></li></ul></div></details></div><div class="site-menu"><nav id="tsd-sidebar-links" class="tsd-navigation"><a href="https://github.com/theam/magek" class="tsd-nav-link">GitHub</a></nav><nav class="tsd-navigation"><a href="../index.html">Magek Framework</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
